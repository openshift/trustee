# THIS FILE IS AUTOMATICALLY GENERATED BY CARGO
#
# When uploading crates to the registry Cargo will automatically
# "normalize" Cargo.toml files for maximal compatibility
# with all versions of Cargo and also rewrite `path` dependencies
# to registry (e.g., crates.io) dependencies.
#
# If you are reading this file be aware that the original Cargo.toml
# will likely look very different (and much more reasonable).
# See Cargo.toml.orig for the original contents.

[package]
edition = "2021"
name = "kbs_protocol"
version = "0.1.0"
authors = ["The Attestation Agent Authors"]
publish = false

[dependencies]
anyhow = "1.0"
async-trait = "0.1.78"
base64 = "0.21.7"
kbs-types = "0.6.0"
log = "0.4.14"
serde_json = "1.0"
sha2 = "0.10.7"
thiserror = "1.0"
tokio = "1.0"
url = "2.5.1"
zeroize = "1.5.7"

[dependencies.attester]
path = "../attester"
default-features = false

[dependencies.crypto]
path = "../deps/crypto"
default-features = false

[dependencies.jwt-simple]
version = "0.12"
features = ["pure-rust"]
default-features = false

[dependencies.protobuf]
version = "3.4.0"
optional = true

[dependencies.reqwest]
version = "0.12"
features = [
    "cookies",
    "json",
]
optional = true
default-features = false

[dependencies.resource_uri]
path = "../deps/resource_uri"

[dependencies.serde]
version = "1.0"
features = ["derive"]

[dependencies.ttrpc]
version = "0.8.0"
optional = true

[dev-dependencies]
rstest = "0.17"
serial_test = "2"
tempfile = "3.2"
testcontainers = "0.14"

[dev-dependencies.tokio]
version = "1.0"
features = [
    "rt",
    "macros",
    "fs",
    "process",
]

[build-dependencies.ttrpc-codegen]
version = "0.4.2"
optional = true

[features]
aa_token = [
    "ttrpc-codegen",
    "passport",
    "ttrpc/async",
    "protobuf",
]
all-attesters = ["attester/all-attesters"]
az-snp-vtpm-attester = ["attester/az-snp-vtpm-attester"]
az-tdx-vtpm-attester = ["attester/az-tdx-vtpm-attester"]
background_check = ["tokio/time"]
cca-attester = ["attester/cca-attester"]
csv-attester = ["attester/csv-attester"]
default = [
    "background_check",
    "passport",
    "rust-crypto",
    "all-attesters",
]
openssl = [
    "reqwest/native-tls-vendored",
    "crypto/openssl",
]
passport = []
rust-crypto = [
    "reqwest/rustls-tls",
    "crypto/rust-crypto",
]
se-attester = ["attester/se-attester"]
sgx-attester = ["attester/sgx-attester"]
snp-attester = ["attester/snp-attester"]
tdx-attester = ["attester/tdx-attester"]
