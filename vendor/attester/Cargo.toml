# THIS FILE IS AUTOMATICALLY GENERATED BY CARGO
#
# When uploading crates to the registry Cargo will automatically
# "normalize" Cargo.toml files for maximal compatibility
# with all versions of Cargo and also rewrite `path` dependencies
# to registry (e.g., crates.io) dependencies.
#
# If you are reading this file be aware that the original Cargo.toml
# will likely look very different (and much more reasonable).
# See Cargo.toml.orig for the original contents.

[package]
edition = "2021"
name = "attester"
version = "0.1.0"
authors = ["The Attestation Agent Authors"]
publish = false
readme = "README.md"

[[bin]]
name = "evidence_getter"
required-features = ["bin"]

[dependencies]
anyhow = "1.0"
async-trait = "0.1.78"
base64 = "0.21.7"
kbs-types = "0.6.0"
log = "0.4.14"
serde_json = "1.0"
sha2 = "0.10.7"
thiserror = "1.0"

[dependencies.az-snp-vtpm]
version = "0.5.3"
features = ["attester"]
optional = true
default-features = false

[dependencies.az-tdx-vtpm]
version = "0.5.3"
features = ["attester"]
optional = true
default-features = false

[dependencies.clap]
version = "~4.2.7"
features = ["derive"]
optional = true

[dependencies.codicon]
version = "3.0"
optional = true

[dependencies.csv-rs]
git = "https://github.com/openanolis/csv-rs"
rev = "b74aa8c"
optional = true

[dependencies.hyper]
version = "0.14"
features = ["full"]
optional = true

[dependencies.hyper-tls]
version = "0.5"
optional = true

[dependencies.nix]
version = "0.28"
features = [
    "ioctl",
    "fs",
]
optional = true

[dependencies.occlum_dcap]
git = "https://github.com/occlum/occlum"
tag = "v0.29.7"
optional = true

[dependencies.pv]
version = "0.10.0"
optional = true
package = "s390_pv"

[dependencies.scroll]
version = "0.12.0"
features = [
    "derive",
    "std",
]
optional = true
default-features = false

[dependencies.serde]
version = "1.0"
features = ["derive"]

[dependencies.serde_with]
version = "1.11.0"
features = ["base64"]

[dependencies.sev]
version = "3.1.1"
features = ["snp"]
optional = true
default-features = false

[dependencies.strum]
version = "0.25"
features = ["derive"]

[dependencies.tdx-attest-rs]
git = "https://github.com/intel/SGXDataCenterAttestationPrimitives"
tag = "DCAP_1.20"
optional = true

[dependencies.tempfile]
version = "3.2"
optional = true

[dependencies.tokio]
version = "1"
features = ["full"]
optional = true

[dev-dependencies]
rstest = "0.17"
tokio = "1.0"

[features]
all-attesters = [
    "tdx-attester",
    "sgx-attester",
    "az-snp-vtpm-attester",
    "az-tdx-vtpm-attester",
    "snp-attester",
    "csv-attester",
    "cca-attester",
    "se-attester",
]
az-snp-vtpm-attester = ["az-snp-vtpm"]
az-tdx-vtpm-attester = ["az-tdx-vtpm"]
bin = [
    "tokio/rt",
    "tokio/macros",
    "clap",
]
cca-attester = ["nix"]
csv-attester = [
    "csv-rs",
    "codicon",
    "hyper",
    "hyper-tls",
    "tokio",
]
default = ["all-attesters"]
se-attester = ["pv"]
sgx-attester = ["occlum_dcap"]
snp-attester = ["sev"]
tdx-attester = [
    "scroll",
    "tsm-report",
    "tdx-attest-rs",
]
tsm-report = ["tempfile"]
